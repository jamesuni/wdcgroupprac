<!--NOTES:

â€“Most of this code is from this blog post: https://gsuite-developers.googleblog.com/2011/12/using-new-js-library-to-unlock-power-of.html

http://stackoverflow.com/questions/11607465/need-good-example-google-calendar-api-in-javascript
-->

<!DOCTYPE html>

<script src="https://apis.google.com/js/api.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="APITest.js"></script>

<script>
    var clientId = '628908668837-h83l4eba9t5qeccitkpu0t5qoffmbd9l.apps.googleusercontent.com';
    var apiKey = 'AIzaSyAakfWDUKc-AWzkvJu5CNv1djte1Im0rQA';
    var scopes = 'https://www.googleapis.com/auth/calendar';

    function handleClientLoad() {
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth, 1);
        checkAuth();
    }

    function checkAuth() {
        gapi.auth.authorize({
                client_id: clientId,
                scope: scopes,
                immediate: true
            },
            handleAuthResult);
    }

    function handleAuthResult(authResult) {
        var authorizeButton = document.getElementById('authorize-button');
        if (authResult) {
            authorizeButton.style.color = 'green';
            makeApiCall();
        } else {
            authorizeButton.style.color = 'yellow';
            authorizeButton.onclick = handleAuthClick;
        }
    }

    function handleAuthClick(event) {
        gapi.auth.authorize({
                client_id: clientId,
                scope: scopes,
                immediate: false
            },
            handleAuthResult);
        return false;
    }

</script>


<html>

<head>
    <link rel="stylesheet" href="mainTheme.css">
    <script src = "loginLoad.js"></script>
<!--    <script src="JavaScript.js"></script>-->
</head>

<body onload="loadLogin()">

    <p id="loginBox"> </p>
    <h1 id="titleH"> Journal Website </h1>

    <input id="mainButtonSelected" type="button" onclick="location.href='APItest.html';" value="History" />
    <input class="mainButton" type="button" onclick="location.href='pageSignUp.html';" value="Account" />
    <input class="mainButton" type="button" onclick="location.href='pageJournal.html';" value="+" /> <br>


    <select id="selectYear" onchange="makeApiCall();loadBoxes">
                <option value="2013">2013</option>
                <option value="2014">2014</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
            </select>

    <select id="selectMonth" onchange="makeApiCall();loadBoxes()">
                <option value="01">January</option>
                <option value="02">Febuary</option>
                <option value="03">March</option>
                <option value="04">April</option>
                <option value="05">May</option>
                <option value="06">June</option>
                <option value="07">July</option>
                <option value="08">August</option>
                <option value="09">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>

    <ul id='events'> </ul>
    <!-- ul = 'Unorderd List', events go in here -->

    <div2 id="div2"> </div2>
    <!-- new list test goes in here -->

    <a href='#' id='authorize-button' onclick='handleAuthClick();'> Authorize Button</a>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <!--    moving the handleClientLoad() script to top of page stops it running automatically-->


</body>

</html>
